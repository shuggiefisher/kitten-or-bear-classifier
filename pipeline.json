{
    "metrics": [
        "Confusion matrix"
    ],
    "version": 1,
    "transforms": {
        "Neural network pretrained on imagenet": {
            "files": {
                "weights": "pretrained network weights",
                "prototxt": "caffe deploy.prototxt",
                "mean": "Imagenet mean image"
            },
            "transform_type": "org.berkeleyvision.caffe.bvlc_caffenet",
            "parameters": {
                "output_keys": {
                    "processed_urls": {
                        "dtype": "S500",
                        "shape": [
                            ":",
                            1
                        ]
                    },
                    "fc7": {
                        "dtype": "f4",
                        "shape": [
                            ":",
                            4096
                        ]
                    }
                }
            }
        },
        "Multinomial Naive Bayes Classifier": {
            "transform_type": "org.scikit-learn.naive_bayes.MultinomialNB"
        },
        "image_classifier_confusion": {
            "transform_type": "org.scikit-learn.metrics.confusion_matrix"
        },
        "Join image labels and extracted features": {
            "transform_type": "com.brain4k.transforms.data_join",
            "parameters": {
                "right_on": "url",
                "retain_keys": {
                    "right": [
                        "label"
                    ],
                    "left": [
                        "fc7"
                    ]
                },
                "left_on": "processed_urls",
                "output_keys": {
                    "label": {
                        "dtype": "i2",
                        "shape": [
                            185,
                            1
                        ]
                    },
                    "fc7": {
                        "dtype": "f4",
                        "shape": [
                            185,
                            4096
                        ]
                    }
                }
            }
        },
        "Split into test and training set": {
            "version": 1,
            "transform_type": "org.scikit-learn.cross_validation.test_train_split",
            "parameters": {
                "test_size": 0.2,
                "data": "fc7",
                "target": "label"
            }
        }
    },
    "stages": [
        {
            "inputs": [
                "kitten-or-bear images"
            ],
            "accept_variance_in": [
                "Extracted image features"
            ],
            "sha1": "5795ce217fbcc9ef405ec6b8fac304fff4b234da",
            "outputs": [
                "Extracted image features"
            ],
            "transform": "Neural network pretrained on imagenet",
            "actions": [
                "predict"
            ]
        },
        {
            "inputs": [
                "Extracted image features",
                "kitten-or-bear images"
            ],
            "sha1": "e2c349d75c99c44c0e9892a6122aabe966e77c43",
            "transform": "Join image labels and extracted features",
            "actions": [
                "join"
            ],
            "outputs": [
                "Image features and ground truth labels"
            ]
        },
        {
            "inputs": [
                "Image features and ground truth labels"
            ],
            "sha1": "62f867ef59ab79f3e65bad4dfe78388e94295002",
            "transform": "Split into test and training set",
            "actions": [
                "split"
            ],
            "outputs": [
                "Test and Training image features"
            ]
        },
        {
            "inputs": [
                "Test and Training image features"
            ],
            "sha1": "6c4b7861413114dc9362304fc68d469df0d8f40b",
            "transform": "Multinomial Naive Bayes Classifier",
            "actions": [
                "train",
                "test"
            ],
            "outputs": [
                "kitten-or-bear classifier",
                "Image classifier test results"
            ]
        },
        {
            "inputs": [
                "Image classifier test results",
                "Image ground truth labels"
            ],
            "sha1": "7a6c17bd1f6483269b6e02496b83b42295a8a8c2",
            "transform": "Confusion matrix",
            "actions": [
                "plot"
            ],
            "outputs": [
                "Image classifier confusion graph",
                "Image classifier confusion metric"
            ]
        }
    ],
    "data": {
        "Extracted image features": {
            "local_filename": "image_features.hdf5",
            "data_type": "hdf5"
        },
        "Test and Training image features": {
            "local_filename": "test_train_features.hdf5",
            "data_type": "hdf5"
        },
        "pretrained network weights": {
            "url": "http://dl.caffe.berkeleyvision.org/bvlc_reference_caffenet.caffemodel",
            "sha1": "4c8d77deb20ea792f84eb5e6d0a11ca0a8660a46"
        },
        "Image classifier test results": {
            "local_filename": "image_classifier_test_results.hdf5",
            "data_type": "hdf5"
        },
        "Image features and ground truth labels": {
            "local_filename": "features_and_labels.hdf5",
            "data_type": "hdf5"
        },
        "Image ground truth labels": {
            "local_filename": "labels.csv",
            "data_type": "csv"
        },
        "Image classifier confusion graph": {
            "local_filename": "image_classifier_confusion.png",
            "data_type": "figure"
        },
        "kitten-or-bear classifier": {
            "local_filename": "image_classifier.pkl",
            "data_type": "pickle"
        },
        "kitten-or-bear images": {
            "local_filename": "bear_vs_kitten.csv",
            "data_type": "csv"
        },
        "caffe deploy.prototxt": {
            "url": "https://raw.githubusercontent.com/BVLC/caffe/master/models/bvlc_reference_caffenet/deploy.prototxt",
            "sha1": "d927168d1f2c9e32ff50ff1a69aacb775b00bd0c"
        },
        "Image classifier confusion metric": {
            "local_filename": "image_classifier_confusion.md",
            "data_type": "markdown"
        },
        "Imagenet mean image": {
            "url": "https://github.com/BVLC/caffe/raw/master/python/caffe/imagenet/ilsvrc_2012_mean.npy",
            "sha1": "8284f7ac12f5b0f6d5069c1fac00d8e0ba647b2f"
        }
    }
}